From e167fc4f223d8ab9b456daaf527f5d5b0fad99bf Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?I=C3=B1aki=20=C3=9Acar?= <iucar@fedoraproject.org>
Date: Sat, 30 May 2020 15:30:30 +0200
Subject: [PATCH] fix build under Rv4.0

---
 src/cpp/r/session/REmbeddedPosix.cpp | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/cpp/r/session/REmbeddedPosix.cpp b/src/cpp/r/session/REmbeddedPosix.cpp
index dc8ea49..4e9dd77 100644
--- a/src/cpp/r/session/REmbeddedPosix.cpp
+++ b/src/cpp/r/session/REmbeddedPosix.cpp
@@ -13,6 +13,8 @@
  *
  */
 
+#include <Rversion.h>
+
 #include <r/RExec.hpp>
 
 #include <shared_core/FilePath.hpp>
@@ -104,7 +106,11 @@ void runEmbeddedR(const core::FilePath& /*rHome*/,    // ignored on posix
    structRstart rp;
    Rstart Rp = &rp;
    R_DefParams(Rp) ;
-   Rp->R_Slave = FALSE ;
+   #if R_VERSION < R_Version(4, 0, 0)
+      Rp->R_Slave = FALSE;
+   #else
+      Rp->R_NoEcho = FALSE;
+   #endif
    Rp->R_Quiet = quiet ? TRUE : FALSE;
    Rp->R_Interactive = TRUE ;
    Rp->SaveAction = defaultSaveAction ;
-- 
2.25.2

